<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHORSE ‚Äî Dual Pathway Architecture</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Newsreader:ital,wght@0,400;0,500;0,600;1,400&family=JetBrains+Mono:wght@400;500;600&display=swap');
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --bg: #fafaf9;
            --surface: #ffffff;
            --border: #e7e5e4;
            --text: #1c1917;
            --text-dim: #57534e;
            --text-light: #a8a29e;
            --ec: #059669;
            --dg: #7c3aed;
            --ca3: #dc2626;
            --ca1: #2563eb;
            --msp: #0891b2;
            --tsp: #d97706;
        }
        
        body {
            font-family: 'Newsreader', Georgia, serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            padding: 1.5rem 2rem;
        }
        
        .page {
            max-width: 1100px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 1.25rem;
        }
        
        h1 {
            font-size: 1.5rem;
            font-weight: 500;
            margin-bottom: 0.25rem;
            letter-spacing: -0.02em;
        }
        
        h1 code {
            font-family: 'JetBrains Mono', monospace;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 600;
        }
        
        .subtitle {
            font-size: 0.9rem;
            color: var(--text-dim);
            font-style: italic;
        }
        
        /* Pathway panels */
        .pathway-panel {
            background: var(--surface);
            border-radius: 12px;
            margin-bottom: 1rem;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.06);
        }
        
        .pathway-header {
            padding: 0.6rem 1.25rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .pathway-header.msp {
            background: linear-gradient(135deg, #ecfeff 0%, #cffafe 100%);
            border-bottom: 2px solid #0891b2;
        }
        
        .pathway-header.tsp {
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            border-bottom: 2px solid #d97706;
        }
        
        .pathway-title {
            display: flex;
            align-items: center;
            gap: 0.6rem;
        }
        
        .pathway-title h2 {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            font-weight: 600;
            letter-spacing: 0.02em;
        }
        
        .pathway-title.msp h2 { color: #0e7490; }
        .pathway-title.tsp h2 { color: #b45309; }
        
        .pathway-badge {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.65rem;
            padding: 0.2rem 0.45rem;
            border-radius: 4px;
            font-weight: 500;
        }
        
        .pathway-badge.msp {
            background: #0891b2;
            color: white;
        }
        
        .pathway-badge.tsp {
            background: #d97706;
            color: white;
        }
        
        .pathway-function {
            font-size: 0.78rem;
            color: var(--text-dim);
            font-style: italic;
        }
        
        .pathway-diagram {
            padding: 1rem 1.25rem;
        }
        
        svg {
            width: 100%;
            height: auto;
            display: block;
        }
        
        /* SVG Typography */
        .region-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 15px;
            font-weight: 600;
        }
        
        .region-size {
            font-family: 'JetBrains Mono', monospace;
            font-size: 9px;
            fill: var(--text-dim);
        }
        
        .function-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 7px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }
        
        .sparsity-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 8px;
            font-weight: 500;
        }
        
        .module-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 7.5px;
        }
        
        .arrow-label {
            font-family: 'Newsreader', Georgia, serif;
            font-size: 8px;
            fill: var(--text-dim);
        }
        
        .loss-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 7px;
        }
        
        .phase-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 9px;
            font-weight: 600;
        }
        
        /* Explanation section */
        .explanation {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.75rem;
            margin-top: 0.5rem;
        }
        
        .explanation-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 0.875rem;
        }
        
        .explanation-card h3 {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.78rem;
            font-weight: 600;
            margin-bottom: 0.4rem;
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }
        
        .explanation-card.msp h3 { color: #0891b2; }
        .explanation-card.tsp h3 { color: #d97706; }
        
        .explanation-card p {
            font-size: 0.78rem;
            color: var(--text-dim);
            line-height: 1.45;
        }
        
        .explanation-card ul {
            font-size: 0.78rem;
            color: var(--text-dim);
            line-height: 1.45;
            margin-top: 0.35rem;
            padding-left: 1.1rem;
        }
        
        .explanation-card code {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.68rem;
            background: #f5f5f4;
            padding: 0.1em 0.25em;
            border-radius: 3px;
        }
        
        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 1.25rem;
            justify-content: center;
            padding: 0.6rem 1rem;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 0.72rem;
            margin-top: 0.75rem;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            color: var(--text-dim);
        }
        
        .legend-swatch {
            width: 11px;
            height: 11px;
            border-radius: 2px;
            border: 1.5px solid;
        }
        
        .legend-line {
            width: 16px;
            height: 2px;
        }
    </style>
</head>
<body>
    <div class="page">
        <header>
            <h1><code>CHORSE</code> Dual Pathway Architecture</h1>
            <p class="subtitle">Complementary Learning: Fast Encoding (MSP) vs Pattern-Separated Recall (TSP)</p>
        </header>
        
        <!-- ==================== MSP PANEL ==================== -->
        <div class="pathway-panel">
            <div class="pathway-header msp">
                <div class="pathway-title msp">
                    <h2>MSP: Monosynaptic Pathway</h2>
                    <span class="pathway-badge msp">ENCODING</span>
                </div>
                <div class="pathway-function">Theta Phase 1 ‚Äî Direct autoencoder baseline (CA3 inhibited)</div>
            </div>
            <div class="pathway-diagram">
                <svg viewBox="0 0 950 130">
                    <defs>
                        <marker id="arrowEC" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
                            <path d="M0,0 L7,2.5 L0,5 L1.5,2.5 Z" fill="#059669"/>
                        </marker>
                        <marker id="arrowCA1" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
                            <path d="M0,0 L7,2.5 L0,5 L1.5,2.5 Z" fill="#2563eb"/>
                        </marker>
                        <marker id="arrowFrozen" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
                            <path d="M0,0 L7,2.5 L0,5 L1.5,2.5 Z" fill="#9ca3af"/>
                        </marker>
                    </defs>
                    
                    <!-- EC Input -->
                    <g transform="translate(40, 15)">
                        <rect x="0" y="0" width="110" height="95" fill="#d1fae5" stroke="#059669" stroke-width="2" rx="8"/>
                        <text class="region-label" x="55" y="30" text-anchor="middle" fill="#059669">EC</text>
                        <text class="region-size" x="55" y="44" text-anchor="middle">30 units</text>
                        <rect x="15" y="55" width="80" height="14" fill="#059669" rx="3" opacity="0.15"/>
                        <text class="function-label" x="55" y="65" text-anchor="middle" fill="#059669">INPUT</text>
                        <text class="sparsity-value" x="55" y="82" text-anchor="middle" fill="#059669">dense</text>
                    </g>
                    
                    <!-- Arrow EC ‚Üí CA1 (frozen) -->
                    <path d="M 155 62 L 275 62" stroke="#9ca3af" stroke-width="2" stroke-dasharray="6,4" 
                          fill="none" marker-end="url(#arrowFrozen)"/>
                    <g transform="translate(178, 40)">
                        <rect x="0" y="0" width="72" height="16" fill="white" stroke="#9ca3af" stroke-width="1" rx="3" stroke-dasharray="3,2"/>
                        <text class="module-label" x="36" y="11" text-anchor="middle" fill="#9ca3af">StripedMLP ‚ùÑÔ∏è</text>
                    </g>
                    <text class="arrow-label" x="214" y="85" text-anchor="middle">frozen random</text>
                    
                    <!-- CA1 -->
                    <g transform="translate(285, 15)">
                        <rect x="0" y="0" width="110" height="95" fill="#eff6ff" stroke="#2563eb" stroke-width="2" rx="8"/>
                        <text class="region-label" x="55" y="30" text-anchor="middle" fill="#2563eb">CA1</text>
                        <text class="region-size" x="55" y="44" text-anchor="middle">800 units</text>
                        <rect x="12" y="55" width="86" height="14" fill="#2563eb" rx="3" opacity="0.12"/>
                        <text class="function-label" x="55" y="65" text-anchor="middle" fill="#2563eb">AUTOENCODER</text>
                        <text class="sparsity-value" x="55" y="82" text-anchor="middle" fill="#2563eb">50% (KWTA)</text>
                    </g>
                    
                    <!-- Arrow CA1 ‚Üí EC out (trained) -->
                    <path d="M 400 62 L 520 62" stroke="#2563eb" stroke-width="2" fill="none" marker-end="url(#arrowEC)"/>
                    <g transform="translate(423, 40)">
                        <rect x="0" y="0" width="65" height="16" fill="white" stroke="#2563eb" stroke-width="1" rx="3"/>
                        <text class="module-label" x="32" y="11" text-anchor="middle" fill="#2563eb">StripedMLP</text>
                    </g>
                    <text class="arrow-label" x="460" y="85" text-anchor="middle">trained</text>
                    
                    <!-- EC Output -->
                    <g transform="translate(530, 15)">
                        <rect x="0" y="0" width="110" height="95" fill="#d1fae5" stroke="#059669" stroke-width="2" rx="8"/>
                        <text class="region-label" x="55" y="30" text-anchor="middle" fill="#059669">EC</text>
                        <text class="region-size" x="55" y="44" text-anchor="middle">30 units</text>
                        <rect x="15" y="55" width="80" height="14" fill="#059669" rx="3" opacity="0.15"/>
                        <text class="function-label" x="55" y="65" text-anchor="middle" fill="#059669">OUTPUT</text>
                        <text class="sparsity-value" x="55" y="82" text-anchor="middle" fill="#059669">‚âà input</text>
                    </g>
                    
                    <!-- Loss indicator -->
                    <g transform="translate(670, 25)">
                        <rect x="0" y="0" width="95" height="38" fill="#fdf4ff" stroke="#c026d3" stroke-width="1" rx="5"/>
                        <text class="loss-label" x="47" y="15" text-anchor="middle" fill="#c026d3">‚Ñí RECONSTRUCTION</text>
                        <text class="module-label" x="47" y="28" text-anchor="middle" fill="#a21caf">MSE(input, output)</text>
                    </g>
                    <path d="M 670 44 L 645 62" stroke="#c026d3" stroke-width="1" stroke-dasharray="3,2" fill="none"/>
                    
                    <!-- Phase label -->
                    <g transform="translate(800, 35)">
                        <rect x="0" y="0" width="90" height="40" fill="#ecfeff" stroke="#0891b2" stroke-width="1" rx="5"/>
                        <text class="phase-label" x="45" y="18" text-anchor="middle" fill="#0891b2">BASELINE</text>
                        <text class="module-label" x="45" y="32" text-anchor="middle" fill="#0e7490">before TSP training</text>
                    </g>
                </svg>
            </div>
        </div>
        
        <!-- ==================== TSP PANEL ==================== -->
        <div class="pathway-panel">
            <div class="pathway-header tsp">
                <div class="pathway-title tsp">
                    <h2>TSP: Trisynaptic Pathway</h2>
                    <span class="pathway-badge tsp">RECALL</span>
                </div>
                <div class="pathway-function">Theta Phase 2 ‚Äî Pattern separation (DG) ‚Üí Association (CA3) ‚Üí Completion</div>
            </div>
            <div class="pathway-diagram">
                <svg viewBox="0 0 950 185">
                    <defs>
                        <marker id="arrowDG" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
                            <path d="M0,0 L7,2.5 L0,5 L1.5,2.5 Z" fill="#7c3aed"/>
                        </marker>
                        <marker id="arrowCA3" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
                            <path d="M0,0 L7,2.5 L0,5 L1.5,2.5 Z" fill="#dc2626"/>
                        </marker>
                        <marker id="arrowCA1b" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
                            <path d="M0,0 L7,2.5 L0,5 L1.5,2.5 Z" fill="#2563eb"/>
                        </marker>
                        <marker id="arrowECb" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
                            <path d="M0,0 L7,2.5 L0,5 L1.5,2.5 Z" fill="#059669"/>
                        </marker>
                        <marker id="arrowFrozenB" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
                            <path d="M0,0 L7,2.5 L0,5 L1.5,2.5 Z" fill="#9ca3af"/>
                        </marker>
                    </defs>
                    
                    <!-- EC Input (partial cue) -->
                    <g transform="translate(15, 45)">
                        <rect x="0" y="0" width="90" height="95" fill="#d1fae5" stroke="#059669" stroke-width="2" rx="8"/>
                        <text class="region-label" x="45" y="28" text-anchor="middle" fill="#059669">EC</text>
                        <text class="region-size" x="45" y="42" text-anchor="middle">30 units</text>
                        <rect x="8" y="52" width="74" height="14" fill="#059669" rx="3" opacity="0.15"/>
                        <text class="function-label" x="45" y="62" text-anchor="middle" fill="#059669">PARTIAL CUE</text>
                        <text class="sparsity-value" x="45" y="82" text-anchor="middle" fill="#059669">corrupted</text>
                    </g>
                    
                    <!-- Arrow EC ‚Üí DG -->
                    <path d="M 110 92 L 155 92" stroke="#059669" stroke-width="2" fill="none" marker-end="url(#arrowDG)"/>
                    <g transform="translate(112, 70)">
                        <rect x="0" y="0" width="50" height="14" fill="white" stroke="#6366f1" stroke-width="1" rx="3"/>
                        <text class="module-label" x="25" y="10" text-anchor="middle" fill="#6366f1">SparseMLP</text>
                    </g>
                    
                    <!-- DG -->
                    <g transform="translate(165, 45)">
                        <rect x="0" y="0" width="105" height="95" fill="#f5f3ff" stroke="#7c3aed" stroke-width="2" rx="8"/>
                        <text class="region-label" x="52" y="26" text-anchor="middle" fill="#7c3aed">DG</text>
                        <text class="region-size" x="52" y="40" text-anchor="middle">2048 units</text>
                        <rect x="8" y="48" width="90" height="14" fill="#7c3aed" rx="3" opacity="0.12"/>
                        <text class="function-label" x="53" y="58" text-anchor="middle" fill="#7c3aed">SEPARATION</text>
                        <text class="sparsity-value" x="52" y="75" text-anchor="middle" fill="#7c3aed">5% active</text>
                        <!-- Sparse dots (1/20 = 5%) -->
                        <g transform="translate(8, 82)">
                            <circle cx="4" cy="4" r="2.5" fill="#ede9fe"/>
                            <circle cx="12" cy="4" r="2.5" fill="#ede9fe"/>
                            <circle cx="20" cy="4" r="2.5" fill="#7c3aed"/>
                            <circle cx="28" cy="4" r="2.5" fill="#ede9fe"/>
                            <circle cx="36" cy="4" r="2.5" fill="#ede9fe"/>
                            <circle cx="44" cy="4" r="2.5" fill="#ede9fe"/>
                            <circle cx="52" cy="4" r="2.5" fill="#ede9fe"/>
                            <circle cx="60" cy="4" r="2.5" fill="#ede9fe"/>
                            <circle cx="68" cy="4" r="2.5" fill="#ede9fe"/>
                            <circle cx="76" cy="4" r="2.5" fill="#ede9fe"/>
                            <circle cx="84" cy="4" r="2.5" fill="#ede9fe"/>
                        </g>
                    </g>
                    
                    <!-- Orthogonal loss -->
                    <g transform="translate(175, 5)">
                        <rect x="0" y="0" width="75" height="32" fill="#fdf4ff" stroke="#c026d3" stroke-width="1" rx="4"/>
                        <text class="loss-label" x="37" y="13" text-anchor="middle" fill="#c026d3">‚Ñí ORTHOGONAL</text>
                        <text class="module-label" x="37" y="25" text-anchor="middle" fill="#a21caf">separation</text>
                    </g>
                    <path d="M 212 37 L 217 45" stroke="#c026d3" stroke-width="1" stroke-dasharray="2,2" fill="none"/>
                    
                    <!-- Arrow DG ‚Üí CA3 (frozen) -->
                    <path d="M 275 92 L 325 92" stroke="#9ca3af" stroke-width="2" stroke-dasharray="5,3" 
                          fill="none" marker-end="url(#arrowFrozenB)"/>
                    <g transform="translate(280, 70)">
                        <rect x="0" y="0" width="45" height="14" fill="white" stroke="#9ca3af" stroke-width="1" rx="3" stroke-dasharray="3,2"/>
                        <text class="module-label" x="22" y="10" text-anchor="middle" fill="#9ca3af">MLP ‚ùÑÔ∏è</text>
                    </g>
                    
                    <!-- CA3 -->
                    <g transform="translate(335, 45)">
                        <rect x="0" y="0" width="105" height="95" fill="#fef2f2" stroke="#dc2626" stroke-width="2" rx="8"/>
                        <text class="region-label" x="52" y="26" text-anchor="middle" fill="#dc2626">CA3</text>
                        <text class="region-size" x="52" y="40" text-anchor="middle">400 units</text>
                        <rect x="8" y="48" width="90" height="14" fill="#dc2626" rx="3" opacity="0.12"/>
                        <text class="function-label" x="53" y="58" text-anchor="middle" fill="#dc2626">ASSOCIATION</text>
                        <text class="sparsity-value" x="52" y="75" text-anchor="middle" fill="#dc2626">50% active</text>
                        <!-- Dense dots (50%) -->
                        <g transform="translate(12, 82)">
                            <circle cx="4" cy="4" r="2.5" fill="#dc2626"/>
                            <circle cx="12" cy="4" r="2.5" fill="#fecaca"/>
                            <circle cx="20" cy="4" r="2.5" fill="#dc2626"/>
                            <circle cx="28" cy="4" r="2.5" fill="#dc2626"/>
                            <circle cx="36" cy="4" r="2.5" fill="#fecaca"/>
                            <circle cx="44" cy="4" r="2.5" fill="#dc2626"/>
                            <circle cx="52" cy="4" r="2.5" fill="#fecaca"/>
                            <circle cx="60" cy="4" r="2.5" fill="#dc2626"/>
                            <circle cx="68" cy="4" r="2.5" fill="#fecaca"/>
                            <circle cx="76" cy="4" r="2.5" fill="#dc2626"/>
                        </g>
                    </g>
                    
                    <!-- Arrow CA3 ‚Üí CA1 -->
                    <path d="M 445 92 L 495 92" stroke="#dc2626" stroke-width="2" fill="none" marker-end="url(#arrowCA1b)"/>
                    <g transform="translate(452, 70)">
                        <rect x="0" y="0" width="35" height="14" fill="white" stroke="#dc2626" stroke-width="1" rx="3"/>
                        <text class="module-label" x="17" y="10" text-anchor="middle" fill="#dc2626">MLP</text>
                    </g>
                    
                    <!-- CA1 -->
                    <g transform="translate(505, 45)">
                        <rect x="0" y="0" width="105" height="95" fill="#eff6ff" stroke="#2563eb" stroke-width="2" rx="8"/>
                        <text class="region-label" x="52" y="26" text-anchor="middle" fill="#2563eb">CA1</text>
                        <text class="region-size" x="52" y="40" text-anchor="middle">800 units</text>
                        <rect x="5" y="48" width="95" height="14" fill="#2563eb" rx="3" opacity="0.12"/>
                        <text class="function-label" x="52" y="58" text-anchor="middle" fill="#2563eb">RECONSTRUCTION</text>
                        <text class="sparsity-value" x="52" y="75" text-anchor="middle" fill="#2563eb">50% active</text>
                        <!-- Dense dots -->
                        <g transform="translate(12, 82)">
                            <circle cx="4" cy="4" r="2.5" fill="#2563eb"/>
                            <circle cx="12" cy="4" r="2.5" fill="#bfdbfe"/>
                            <circle cx="20" cy="4" r="2.5" fill="#2563eb"/>
                            <circle cx="28" cy="4" r="2.5" fill="#bfdbfe"/>
                            <circle cx="36" cy="4" r="2.5" fill="#2563eb"/>
                            <circle cx="44" cy="4" r="2.5" fill="#2563eb"/>
                            <circle cx="52" cy="4" r="2.5" fill="#bfdbfe"/>
                            <circle cx="60" cy="4" r="2.5" fill="#2563eb"/>
                            <circle cx="68" cy="4" r="2.5" fill="#bfdbfe"/>
                            <circle cx="76" cy="4" r="2.5" fill="#2563eb"/>
                        </g>
                    </g>
                    
                    <!-- Arrow CA1 ‚Üí EC out -->
                    <path d="M 615 92 L 665 92" stroke="#2563eb" stroke-width="2" fill="none" marker-end="url(#arrowECb)"/>
                    <g transform="translate(620, 70)">
                        <rect x="0" y="0" width="50" height="14" fill="white" stroke="#2563eb" stroke-width="1" rx="3"/>
                        <text class="module-label" x="25" y="10" text-anchor="middle" fill="#2563eb">StripedMLP</text>
                    </g>
                    
                    <!-- EC Output (completed) -->
                    <g transform="translate(675, 45)">
                        <rect x="0" y="0" width="90" height="95" fill="#d1fae5" stroke="#059669" stroke-width="2" rx="8"/>
                        <text class="region-label" x="45" y="28" text-anchor="middle" fill="#059669">EC</text>
                        <text class="region-size" x="45" y="42" text-anchor="middle">30 units</text>
                        <rect x="8" y="52" width="74" height="14" fill="#059669" rx="3" opacity="0.15"/>
                        <text class="function-label" x="45" y="62" text-anchor="middle" fill="#059669">COMPLETED</text>
                        <text class="sparsity-value" x="45" y="82" text-anchor="middle" fill="#059669">full pattern</text>
                    </g>
                    
                    <!-- Reconstruction loss -->
                    <g transform="translate(785, 60)">
                        <rect x="0" y="0" width="75" height="32" fill="#fdf4ff" stroke="#c026d3" stroke-width="1" rx="4"/>
                        <text class="loss-label" x="37" y="13" text-anchor="middle" fill="#c026d3">‚Ñí RECONSTRUCT</text>
                        <text class="module-label" x="37" y="25" text-anchor="middle" fill="#a21caf">MSE(in, out)</text>
                    </g>
                    <path d="M 785 76 L 770 92" stroke="#c026d3" stroke-width="1" stroke-dasharray="2,2" fill="none"/>
                    
                    <!-- Secondary path: EC ‚Üí CA3 direct -->
                    <path d="M 105 125 Q 200 165 335 140" stroke="#059669" stroke-width="1.5" stroke-dasharray="4,3" 
                          fill="none" marker-end="url(#arrowCA3)" opacity="0.5"/>
                    <text class="arrow-label" x="180" y="168" fill="#059669" opacity="0.8">EC‚ÜíCA3 direct</text>
                    
                    <!-- 50/50 blend indicator -->
                    <g transform="translate(290, 148)">
                        <rect x="0" y="0" width="55" height="18" fill="white" stroke="#dc2626" stroke-width="1" rx="4"/>
                        <text class="module-label" x="27" y="12" text-anchor="middle" fill="#dc2626">50/50 blend</text>
                    </g>
                    
                    <!-- Phase label -->
                    <g transform="translate(870, 55)">
                        <rect x="0" y="0" width="70" height="48" fill="#fffbeb" stroke="#d97706" stroke-width="1" rx="5"/>
                        <text class="phase-label" x="35" y="18" text-anchor="middle" fill="#d97706">PATTERN</text>
                        <text class="phase-label" x="35" y="32" text-anchor="middle" fill="#d97706">COMPLETION</text>
                        <text class="module-label" x="35" y="44" text-anchor="middle" fill="#b45309">from cue</text>
                    </g>
                </svg>
            </div>
        </div>
        
        <!-- ==================== EXPLANATION ==================== -->
        <div class="explanation">
            <div class="explanation-card msp">
                <h3>‚ö° MSP: Encoding Phase</h3>
                <p>The <strong>monosynaptic pathway</strong> (EC‚ÜíCA1‚ÜíEC) trains as an autoencoder baseline 
                during theta phase 1. CA3 is inhibited during this phase.</p>
                <ul>
                    <li><strong>Frozen projection</strong> (EC‚ÜíCA1): Random, untrained weights</li>
                    <li><strong>Trained decoder</strong> (CA1‚ÜíEC): Learns to reconstruct input</li>
                    <li>Provides baseline before TSP adds pattern separation</li>
                </ul>
            </div>
            <div class="explanation-card tsp">
                <h3>üîç TSP: Recall Phase</h3>
                <p>The <strong>trisynaptic pathway</strong> enables recall from partial cues by using 
                sparse DG codes (reducing AB-AC interference) and CA3 associations.</p>
                <ul>
                    <li><strong>DG</strong>: 5% sparse codes ‚Üí orthogonal patterns ‚Üí less interference</li>
                    <li><strong>CA3</strong>: Associates DG codes with EC patterns</li>
                    <li><strong>CA1</strong>: Reconstructs full pattern from CA3 activity</li>
                </ul>
            </div>
        </div>
        
        <!-- ==================== LEGEND ==================== -->
        <div class="legend">
            <div class="legend-item">
                <div class="legend-swatch" style="background: #d1fae5; border-color: #059669;"></div>
                <span>EC (30)</span>
            </div>
            <div class="legend-item">
                <div class="legend-swatch" style="background: #f5f3ff; border-color: #7c3aed;"></div>
                <span>DG (2048)</span>
            </div>
            <div class="legend-item">
                <div class="legend-swatch" style="background: #fef2f2; border-color: #dc2626;"></div>
                <span>CA3 (400)</span>
            </div>
            <div class="legend-item">
                <div class="legend-swatch" style="background: #eff6ff; border-color: #2563eb;"></div>
                <span>CA1 (800)</span>
            </div>
            <div class="legend-item">
                <div class="legend-line" style="background: #444;"></div>
                <span>Trained</span>
            </div>
            <div class="legend-item">
                <div class="legend-line" style="background: repeating-linear-gradient(90deg, #9ca3af 0px, #9ca3af 4px, transparent 4px, transparent 7px);"></div>
                <span>Frozen ‚ùÑÔ∏è</span>
            </div>
        </div>
    </div>
</body>
</html>
